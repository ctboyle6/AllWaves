<div class="container m-3">
  <h1>Your Preferences</h1>

  <% current_user.preferences.each do |preference| %>
    <%= link_to preference.name, preference_path(preference), class: "btn btn-secondary m-3" %>
  <% end %>

  <%= link_to "New Preference", new_preference_path, class: "btn btn-primary"  %>


  <!-- bootstrap accordian -->
  <div class="accordion" id="accordionPreferences">
    <div class="card">
      <div class="card-header" id="heading-save">
        <h2 class="mb-0">
          <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapse-save" aria-expanded="true" aria-controls="collapse-save">
            Create new preference set
          </button>
        </h2>
      </div>
      <div id="collapse-save" class="collapse" aria-labelledby="heading-save" data-parent="#accordionPreferences">
        <div class="card-body">
          <%= simple_form_for @preference, remote: true do |f| %>
            <%= f.input :name %>
            <%= f.input :favourite %>
            <%= f.input :pref_unit, as: :radio_buttons, collection: ['FT', 'M'], label: 'Preferred Units ðŸ“' %>
            <h3>Swell</h3>
            <hr>
            <br>
            <%= f.hint 'Greater swell height = greater wave size.' %>  <!-- Swell height refers to the distance between the trough (lowest point) to peak (highest point) of a wave as it passes a nearby buoy -->
            <br>
            <%= f.input :swell_hgt_min, as: :range, input_html: { min: 0, max: 20, step: 0.5 }, label: 'Height: Min ðŸŒŠâ¬‡'  %>
            <%= f.input :swell_hgt_max, as: :range, input_html: { min: 0, max: 20, step: 0.5 }, label: 'Height: Max ðŸŒŠâ¬†' %>
            <br>
            <br>
            <%= f.hint 'Greater swell interval = greater wave power.' %> <!-- Swell interval refers to the time between equal points of passing waves -->
            <br>
            <%= f.input :swell_int_min, as: :range, input_html: { min: 0, max: 20, step: 0.5 }, label: 'Interval: Min ðŸ•“ â¬‡' %>
            <%= f.input :swell_int_max, as: :range, input_html: { min: 0, max: 20, step: 0.5 }, label: 'Interval: Max ðŸ•“ â¬†' %>
            <br>
            <br>
            <%= f.hint 'More perpendicular to your coast (with no obstructions) = better wave quality.' %> <!-- Swell direction refers to the trajectory of an incoming swell -->
            <br>
            <%= f.input :swell_dir_min, as: :range, input_html: { min: 0, max: 360, step: 5 }, label: 'Direction: Min ðŸ§­ â¬‡' %>
            <%= f.input :swell_dir_max, as: :range, input_html: { min: 0, max: 360, step: 5 }, label: 'Direction: Max ðŸ§­ â¬†' %>
            <br>
            <br>
            <h3>Wind</h3>
            <hr>
            <br>
            <%= f.hint 'Generally, lighter winds = greater wave quality.' %> <!-- Wind strength refers to the force of nearby winds. Strong winds can mess or subdue incoming swells. Light winds can help push or pull wave faces -->
            <br>
            <%= f.input :wind_str_min, as: :range, input_html: { min: 0, max: 50, step: 0.5 }, label: 'Strength: Min ðŸ’¨ â¬‡' %>
            <%= f.input :wind_str_max, as: :range, input_html: { min: 0, max: 50, step: 0.5 }, label: 'Strength: Max ðŸ’¨ â¬†' %>
            <br>
            <br>
            <%= f.hint 'Generally, offshore winds = greater wave quality.' %> <!-- Wind direction refers to the trajectory of nearby winds. Onshore winds (perpendicular and toward beach) push behind incoming swell, while offshores (perpendicular and toward sea) groom up the faces of incoming swells -->
            <br>
            <%= f.input :wind_dir_min, as: :range, input_html: { min: 0, max: 360, step: 5 }, label: 'Direction: Min ðŸ§­ â¬‡' %>
            <%= f.input :wind_dir_max, as: :range, input_html: { min: 0, max: 360, step: 5 }, label: 'Direction: Max ðŸ§­ â¬†' %>
            <br>
            <br>
            <h3>Tide</h3>
            <hr>
            <%= f.hint 'If you are not sure, choose "NORMAL" and then consult with your locals!' %> <!-- Tide position refers to the time periods where the tide is at its lowest, highest, or mid-points. High tide with too weak of swell may result in a flat day, while low tide may introduce more friction to incoming swells -->
            <br>
            <%= f.input :pref_tide_position, as: :radio_buttons, collection: ['LOW', 'NORMAL', 'HIGH'], label: 'Preferred Tide Position' %>
            <br>
            <br>
            <%= f.button :submit, class: "btn btn-primary" %>
          <% end %>
        </div>
      </div>
    </div>

    <% current_user.preferences.each_with_index do |preference, index| %>
      <div class="card">
        <div class="card-header" id="heading-<%= index + 1 %>">
          <h2 class="mb-0">
            <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapse-<%= index + 1 %>" aria-expanded="true" aria-controls="collapse-<%= index + 1 %>">
              <%= preference.name %>
            </button>
          </h2>
        </div>
        <div id="collapse-<%= index + 1 %>" class="collapse" aria-labelledby="heading-<%= index + 1 %>" data-parent="#accordionPreferences">
          <div class="card-body">
            <%= simple_form_for preference, remote: true do |f| %>
              <%= f.input :name %>
              <%= f.input :favourite %>
              <%= f.input :pref_unit, as: :radio_buttons, collection: ['FT', 'M'], label: 'Preferred Units ðŸ“' %>
              <h3>Swell</h3>
              <hr>
              <br>
              <%= f.hint 'Greater swell height = greater wave size.' %>  <!-- Swell height refers to the distance between the trough (lowest point) to peak (highest point) of a wave as it passes a nearby buoy -->
              <br>
              <%= f.input :swell_hgt_min, as: :range, input_html: { min: 0, max: 20, step: 0.5 }, label: 'Height: Min ðŸŒŠâ¬‡'  %>
              <%= f.input :swell_hgt_max, as: :range, input_html: { min: 0, max: 20, step: 0.5 }, label: 'Height: Max ðŸŒŠâ¬†' %>
              <br>
              <br>
              <%= f.hint 'Greater swell interval = greater wave power.' %> <!-- Swell interval refers to the time between equal points of passing waves -->
              <br>
              <%= f.input :swell_int_min, as: :range, input_html: { min: 0, max: 20, step: 0.5 }, label: 'Interval: Min ðŸ•“ â¬‡' %>
              <%= f.input :swell_int_max, as: :range, input_html: { min: 0, max: 20, step: 0.5 }, label: 'Interval: Max ðŸ•“ â¬†' %>
              <br>
              <br>
              <%= f.hint 'More perpendicular to your coast (with no obstructions) = better wave quality.' %> <!-- Swell direction refers to the trajectory of an incoming swell -->
              <br>
              <%= f.input :swell_dir_min, as: :range, input_html: { min: 0, max: 360, step: 5 }, label: 'Direction: Min ðŸ§­ â¬‡' %>
              <%= f.input :swell_dir_max, as: :range, input_html: { min: 0, max: 360, step: 5 }, label: 'Direction: Max ðŸ§­ â¬†' %>
              <br>
              <br>
              <h3>Wind</h3>
              <hr>
              <br>
              <%= f.hint 'Generally, lighter winds = greater wave quality.' %> <!-- Wind strength refers to the force of nearby winds. Strong winds can mess or subdue incoming swells. Light winds can help push or pull wave faces -->
              <br>
              <%= f.input :wind_str_min, as: :range, input_html: { min: 0, max: 50, step: 0.5 }, label: 'Strength: Min ðŸ’¨ â¬‡' %>
              <%= f.input :wind_str_max, as: :range, input_html: { min: 0, max: 50, step: 0.5 }, label: 'Strength: Max ðŸ’¨ â¬†' %>
              <br>
              <br>
              <%= f.hint 'Generally, offshore winds = greater wave quality.' %> <!-- Wind direction refers to the trajectory of nearby winds. Onshore winds (perpendicular and toward beach) push behind incoming swell, while offshores (perpendicular and toward sea) groom up the faces of incoming swells -->
              <br>
              <%= f.input :wind_dir_min, as: :range, input_html: { min: 0, max: 360, step: 5 }, label: 'Direction: Min ðŸ§­ â¬‡' %>
              <%= f.input :wind_dir_max, as: :range, input_html: { min: 0, max: 360, step: 5 }, label: 'Direction: Max ðŸ§­ â¬†' %>
              <br>
              <br>
              <h3>Tide</h3>
              <hr>
              <%= f.hint 'If you are not sure, choose "NORMAL" and then consult with your locals!' %> <!-- Tide position refers to the time periods where the tide is at its lowest, highest, or mid-points. High tide with too weak of swell may result in a flat day, while low tide may introduce more friction to incoming swells -->
              <br>
              <%= f.input :pref_tide_position, as: :radio_buttons, collection: ['LOW', 'NORMAL', 'HIGH'], label: 'Preferred Tide Position' %>
              <br>
              <br>
              <%= f.submit class: "btn btn-secondary", id: "form-toggle" %>
            <% end %>
            <%= link_to "Delete Preference", preference_path(preference), method: :delete, class: "btn btn-danger my-3" %>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <span>
    <%= link_to "Back to dashboard", user_root_path, class: "btn btn-secondary mr-3 my-3" %>
  </span>
</div>



