<div class="container m-3">
  <h1>Dashboard</h1>
  <h2><%= link_to "My preferences:", preferences_path, class: "text-decoration-none" %></h2>

  <br>

  <% @user_spots.each do |user_spot| %>
    <h2><%= user_spot.spot.name %></h2>
    <form action="/result/conditions/<%= Condition.find_by(spot: user_spot.spot).id %>">
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Preferences
        </button>

        <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
          <% current_user.preferences.each do |preference| %>
            <button class="dropdown-item" type="button"><%= preference.name %></button>
          <% end %>
        </div>
      </div>

      <br>

      <select class="custom-select" name="preference_id">
        <option selected>Select a preference</option>
        <% current_user.preferences.each do |preference| %>
          <option value="<%= preference.id %>"><%= preference.name %></option>
        <% end %>
      </select>

      <br>

        <%#= link_to "go?", result_condition_path(Condition.find_by(spot: user_spot.spot), preference_id: current_user.preferences.last.id)  %>

      <button type="submit" class="btn btn-primary">GO</button>
      <%= link_to "Delete this spot", "/spots/#{user_spot.spot.id}/user_spots/#{user_spot.id}", method: :delete, class: "btn btn-danger" %>
    </form>
  <% end %>
</div>
